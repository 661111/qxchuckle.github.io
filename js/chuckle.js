function FixedCardWidget(e,t,n){if("id"===e)var o=document.getElementById(t);else o=document.getElementsByClassName(t)[n];o&&(o.className.indexOf("fixed-card-widget")>-1?RemoveFixedCardWidget():(RemoveFixedCardWidget(),CreateQuitBox(),o.classList.add("fixed-card-widget")))}function CreateQuitBox(){document.getElementById("aside-content").insertAdjacentHTML("beforebegin",'<div id="quit-box" onclick="RemoveFixedCardWidget()"></div>')}function RemoveFixedCardWidget(){var e=document.querySelectorAll(".fixed-card-widget");if(e)for(i=0;i<e.length;i++)e[i].classList.remove("fixed-card-widget");var t=document.getElementById("quit-box");t&&t.remove()}function refreshCache(){"serviceWorker"in window.navigator&&navigator.serviceWorker.controller?confirm("是否确定刷新全站缓存")&&navigator.serviceWorker.controller.postMessage("refresh"):GLOBAL_CONFIG.Snackbar?btf.snackbarShow("ServiceWorker未激活,请刷新浏览器"):alert("ServiceWorker未激活,请刷新浏览器")}RemoveFixedCardWidget(),navigator.serviceWorker.addEventListener("message",(e=>{"success"===e.data&&window.location.reload(!0)}));let kk={showRightMenu:function(e,t=0,n=0){let o=$("#rightMenu");o.css("top",t+"px").css("left",n+"px"),e?o.show():o.hide()},switchDarkMode:function(){"light"===("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200)},copySelect:function(){document.execCommand("Copy",!1,null),GLOBAL_CONFIG.Snackbar?btf.snackbarShow("你的剪切板已被窝占领惹~"):console.log("你的剪切板已被窝占领惹~")},scrollToTop:function(){btf.scrollToDest(0,500)}};if(!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){let e=$("#rightMenu").width(),t=$("#rightMenu").height();window.oncontextmenu=function(n){$(".rightMenu-group.hide").hide(),document.getSelection().toString()&&$("#menu-text").show();let o=n.clientX+10,r=n.clientY;return o+e>window.innerWidth&&(o-=e),r+t>window.innerHeight&&(r-=t),kk.showRightMenu(!0,r,o),!1}}function getNowURL(){return location.protocol+"//"+location.host+location.pathname}window.addEventListener("click",(function(){kk.showRightMenu(!1)})),$("#menu-backward").on("click",(function(){window.history.back()})),$("#menu-forward").on("click",(function(){window.history.forward()})),$("#menu-refresh").on("click",(function(){window.location.reload()})),$("#menu-darkmode").on("click",kk.switchDarkMode),$("#menu-top").on("click",kk.scrollToTop),$("#menu-home").on("click",(function(){window.location.href=window.location.origin})),
/*!
 * clipboard.js v2.0.10
 * https://clipboardjs.com/
 */
function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClipboardJS=t():e.ClipboardJS=t()}(this,(function(){return function(){var e={686:function(e,t,n){"use strict";n.d(t,{default:function(){return x}});var o=n(279),r=n.n(o),i=n(370),c=n.n(i),a=n(817),u=n.n(a);function l(e){try{return document.execCommand(e)}catch(e){return!1}}var s=function(e){var t=u()(e);return l("cut"),t};function d(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(o,"px"),n.setAttribute("readonly",""),n.value=e,n}var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";if("string"==typeof e){var o=d(e);t.container.appendChild(o),n=u()(o),l("copy"),o.remove()}else n=u()(e),l("copy");return n};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"copy":t,o=e.container,r=e.target,i=e.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==r){if(!r||"object"!==m(r)||1!==r.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&r.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(r.hasAttribute("readonly")||r.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return i?f(i,{container:o}):r?"cut"===n?s(r):f(r,{container:o}):void 0};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=w(e);if(t){var r=w(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function k(e,t){var n="data-clipboard-".concat(e);if(t.hasAttribute(n))return t.getAttribute(n)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,n,o,r=v(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this)).resolveOptions(t),n.listenClick(e),n}return t=i,n=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===h(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=c()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,n=this.action(t)||"copy",o=p({action:n,container:this.container,target:this.target(t),text:this.text(t)});this.emit(o?"success":"error",{action:n,text:o,trigger:t,clearSelection:function(){t&&t.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return k("action",e)}},{key:"defaultTarget",value:function(e){var t=k("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return k("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],o=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return f(e,t)}},{key:"cut",value:function(e){return s(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}],n&&y(t.prototype,n),o&&y(t,o),i}(r()),x=S},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,n){var o=n(828);function r(e,t,n,o,r){var c=i.apply(this,arguments);return e.addEventListener(n,c,r),{destroy:function(){e.removeEventListener(n,c,r)}}}function i(e,t,n,r){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&r.call(e,n)}}e.exports=function(e,t,n,o,i){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return r(e,t,n,o,i)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,n){var o=n(879),r=n(438);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!o.string(t))throw new TypeError("Second argument must be a String");if(!o.fn(n))throw new TypeError("Third argument must be a Function");if(o.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(o.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(o.string(e))return function(e,t,n){return r(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var o=window.getSelection(),r=document.createRange();r.selectNodeContents(e),o.removeAllRanges(),o.addRange(r),t=o.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var o=this;function r(){o.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),o=n[e],r=[];if(o&&t)for(var i=0,c=o.length;i<c;i++)o[i].fn!==t&&o[i].fn._!==t&&r.push(o[i]);return r.length?n[e]=r:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(686)}().default}));const clipboard=new ClipboardJS("button#share-link",{text:function(){return document.title+"："+getNowURL()}});function RemoveFixedComment(){var e=document.querySelectorAll(".fixedcomment");if(e)for(i=0;i<e.length;i++)e[i].classList.remove("fixedcomment")}function AddFixedComment(){var e=document.getElementById("post-comment"),t=document.getElementById("quit-board");e.classList.add("fixedcomment"),t.classList.add("fixedcomment")}function CreateQuitBoard(){document.getElementById("post-comment").insertAdjacentHTML("beforebegin",'<div id="quit-board" onclick="RemoveFixedComment()"></div>')}function FixedCommentBtn(){var e=document.getElementById("post-comment");e&&(e.className.indexOf("fixedcomment")>-1?RemoveFixedComment():(CreateQuitBoard(),AddFixedComment()))}clipboard.on("success",(function(){btf.snackbarShow("成功复制本页的分享链接，快去粘贴吧~")})),clipboard.on("error",(function(){btf.snackbarShow("复制失败")})),kk.copyURL=function(){btf.snackbarShow("成功复制本页的分享链接，快去粘贴吧~");new ClipboardJS("#share-chuckle",{text:function(){return document.title+"："+getNowURL()}})},$("#share-chuckle").on("click",kk.copyURL),kk.postURL=function(){btf.snackbarShow("成功复制本页的分享链接，快去粘贴吧~");new ClipboardJS("#share-post",{text:function(){return document.title+"："+getNowURL()}})},RemoveFixedComment(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).timeago={})}(this,(function(e){"use strict";var t=["second","minute","hour","day","week","month","year"],n=["秒","分钟","小时","天","周","个月","年"];function o(e,t){i[e]=t}function r(e){return i[e]||i.en_US}var i={},c=[60,60,24,7,365/7/12,12];function a(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function u(e,t){for(var n=e<0?1:0,o=e=Math.abs(e),r=0;e>=c[r]&&r<c.length;r++)e/=c[r];return(0==(r*=2)?9:1)<(e=Math.floor(e))&&(r+=1),t(e,r,o)[n].replace("%s",e.toString())}function l(e,t){return((t?a(t):new Date)-a(e))/1e3}var s="timeago-id";function d(e){return parseInt(e.getAttribute(s))}var f={},m=function(e){clearTimeout(e),delete f[e]};function p(e,t,n,o){m(d(e));var r=o.relativeDate,i=o.minInterval,a=l(t,r);e.innerText=u(a,n);var h,y=setTimeout((function(){p(e,t,n,o)}),Math.min(1e3*Math.max(function(e){for(var t=1,n=0,o=Math.abs(e);e>=c[n]&&n<c.length;n++)e/=c[n],t*=c[n];return o=(o%=t)?t-o:t,Math.ceil(o)}(a),i||1),2147483647));f[y]=0,h=y,e.setAttribute(s,h)}o("en_US",(function(e,n){if(0===n)return["just now","right now"];var o=t[Math.floor(n/2)];return 1<e&&(o+="s"),[e+" "+o+" ago","in "+e+" "+o]})),o("zh_CN",(function(e,t){if(0===t)return["刚刚","片刻后"];var o=n[~~(t/2)];return[e+" "+o+"前",e+" "+o+"后"]})),e.cancel=function(e){e?m(d(e)):Object.keys(f).forEach(m)},e.format=function(e,t,n){return u(l(e,n&&n.relativeDate),r(t))},e.register=o,e.render=function(e,t,n){var o=e.length?e:[e];return o.forEach((function(e){p(e,e.getAttribute("datetime"),r(t),n||{})})),o},Object.defineProperty(e,"__esModule",{value:!0})}));let jsonUrl="https://kkapi-open-kohl.vercel.app/api/ispeak?author=62dd12abf978a7ba54fbfed8";function bbtalk(){let e,t=JSON.parse(localStorage.getItem("bibi")),n=Date.now();if(null==t||n-t.time>=18e5)return void getData();e=JSON.parse(t.ls);let o="";e.forEach(((e,t)=>{e.content=e.content.replace(/[\s\uFEFF\xA0]+/g,"");let n=new Date(e.createdAt),r=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds(),i=timeago.format(r,"zh_CN");o+='<li class="item item-'+(t+1)+'">'+('<span class="datatime">'+i+"</span>")+"：<br>"+urlToLink(e.content)+"</li>"})),document.getElementById("bber-talk").innerHTML+='<ul class="talk-list">'+o}function getData(){fetch(jsonUrl).then((e=>e.json())).then((e=>{e={time:Date.now(),ls:JSON.stringify(e.data.items)},localStorage.setItem("bibi",JSON.stringify(e))})).then((()=>{bbtalk()})).catch((()=>{console.log("获取哔哔数据失败！")}))}function urlToLink(e){return e=e.replace(/<img(.*?)src=[\"|\']?(.*?)[\"|\']?(.*?)>|!\[(.*?)\]\((.*?)\)/g,'<i class="fa-solid fa-image"></i>')}function Roll(){try{let e=Array.prototype.slice.call(document.querySelectorAll(".talk-list li")),t=e[0];e.splice(0,1),e.push(t);let n=document.querySelector("ul.talk-list");e.forEach((e=>{n.appendChild(e)}))}catch(e){}}bbtalk(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||setInterval(Roll,2200);